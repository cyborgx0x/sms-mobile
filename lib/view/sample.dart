var SMSSample = [
    {
        'id': 1,
        'address': '1234567890',
        'sms': 'Xin chào, bạn khỏe không?',
        'spam': false
    },
    {
        'id': 2,
        'address': '9876543210',
        'sms': 'Xin chúc mừng! Bạn đã trúng thưởng.',
        'spam': true
    },
    {
        'id': 3,
        'address': '5555555555',
        'sms': 'Nhắc nhở: Cuộc hẹn của bạn là ngày mai.',
        'spam': false
    },
    {
        'id': 4,
        'address': '1111111111',
        'sms': 'Chào bạn! Chỉ kiểm tra thôi.',
        'spam': false
    },
    {
        'id': 5,
        'address': '9999999999',
        'sms': 'KHẨN: Tài khoản của bạn đã bị xâm phạm. Nhấp vào đây để bảo mật.',
        'spam': true
    },
    {
        'id': 6,
        'address': '2222222222',
        'sms': 'Đừng quên mua đồ tạp hóa trên đường về nhà.',
        'spam': false
    },
    {
        'id': 7,
        'address': '8888888888',
        'sms': 'Ưu đãi trong thời gian giới hạn: Mua một tặng một miễn phí!',
        'spam': true
    },
    {
        'id': 8,
        'address': '7777777777',
        'sms': 'Nhắc nhở: Cuộc họp lúc 2 giờ chiều hôm nay.',
        'spam': false
    },
    {
        'id': 9,
        'address': '4444444444',
        'sms': 'Bạn đã được chọn để nhận chiết khấu đặc biệt.',
        'spam': true
    },
    {
        'id': 10,
        'address': '6666666666',
        'sms': 'Xin chào! Chỉ muốn nói xin chào.',
        'spam': false
    },
    {
        'id': 11,
        'address': '1231231231',
        'sms': 'Chúc mừng năm mới! Chúc bạn mọi điều tốt lành.',
        'spam': false
    },
    {
        'id': 12,
        'address': '4564564564',
        'sms': 'KHUYẾN MÃI LỚN: Giảm giá 50% cho toàn bộ sản phẩm.',
        'spam': true
    },
    {
        'id': 13,
        'address': '7897897897',
        'sms': 'Bạn đã đăng ký thành công. Chúng tôi sẽ liên hệ lại.',
        'spam': false
    },
    {
        "id": 15,
        "address": "8247443943",
        "sms": "Tin nh\u1eafn s\u1ed1 15: Ch\u00fac m\u1eebng n\u0103m m\u1edbi! Ch\u00fac b\u1ea1n c\u00f3 m\u1ed9t n\u0103m th\u00e0nh c\u00f4ng v\u00e0 h\u1ea1nh ph\u00fac.",
        "spam": false
    },
    {
        "id": 16,
        "address": "3169640061",
        "sms": "Tin nh\u1eafn s\u1ed1 16: \u0110\u1eb7t h\u00e0ng ngay h\u00f4m nay \u0111\u1ec3 nh\u1eadn \u01b0u \u0111\u00e3i \u0111\u1eb7c bi\u1ec7t.",
        "spam": true
    },
    {
        "id": 17,
        "address": "4884750308",
        "sms": "Tin nh\u1eafn s\u1ed1 17: H\u00f4m nay l\u00e0 ng\u00e0y l\u1ec5 quan tr\u1ecdng. Ch\u00fac m\u1eebng v\u00e0 tr\u00e0n \u0111\u1ea7y ni\u1ec1m vui.",
        "spam": true
    },
    {
        "id": 18,
        "address": "5563595251",
        "sms": "Tin nh\u1eafn s\u1ed1 18: Th\u1eddi ti\u1ebft h\u00f4m nay r\u1ea5t \u0111\u1eb9p. H\u00e3y ra ngo\u00e0i v\u00e0 t\u1eadn h\u01b0\u1edfng.",
        "spam": true
    },
    {
        "id": 19,
        "address": "6703794717",
        "sms": "Tin nh\u1eafn s\u1ed1 19: Gi\u1ea3i \u0111\u1ea5u b\u00f3ng \u0111\u00e1 cu\u1ed1i tu\u1ea7n n\u00e0y \u0111\u00e3 b\u1ecb h\u1ee7y.",
        "spam": false
    },
    {
        "id": 20,
        "address": "4873031665",
        "sms": "Tin nh\u1eafn s\u1ed1 20: B\u1ea1n \u0111\u00e3 \u0111\u0103ng k\u00fd th\u00e0nh c\u00f4ng. H\u00e3y ki\u1ec3m tra email \u0111\u1ec3 ho\u00e0n th\u00e0nh quy tr\u00ecnh.",
        "spam": false
    },
    {
        "id": 21,
        "address": "1491469956",
        "sms": "Tin nh\u1eafn s\u1ed1 21: Ch\u00fac m\u1eebng n\u0103m m\u1edbi! Ch\u00fac b\u1ea1n c\u00f3 m\u1ed9t n\u0103m th\u00e0nh c\u00f4ng v\u00e0 h\u1ea1nh ph\u00fac.",
        "spam": false
    },
    {
        "id": 22,
        "address": "6087644074",
        "sms": "Tin nh\u1eafn s\u1ed1 22: Xin ch\u00e0o, b\u1ea1n c\u00f3 th\u1ec3 g\u1ecdi l\u1ea1i cho t\u00f4i kh\u00f4ng?",
        "spam": false
    },
    {
        "id": 23,
        "address": "1433752632",
        "sms": "Tin nh\u1eafn s\u1ed1 23: \u0110\u1eebng qu\u00ean tham gia s\u1ef1 ki\u1ec7n v\u00e0o ng\u00e0y mai.",
        "spam": false
    },
    {
        "id": 24,
        "address": "5958002271",
        "sms": "Tin nh\u1eafn s\u1ed1 24: C\u1ea3m \u01a1n b\u1ea1n \u0111\u00e3 \u0111\u0103ng k\u00fd. Ch\u00fang t\u00f4i s\u1ebd li\u00ean h\u1ec7 l\u1ea1i trong th\u1eddi gian s\u1edbm nh\u1ea5t.",
        "spam": true
    },
    {
        "id": 25,
        "address": "7050026840",
        "sms": "Tin nh\u1eafn s\u1ed1 25: H\u1eb9n g\u1eb7p l\u1ea1i b\u1ea1n trong bu\u1ed5i ti\u1ec7c t\u1ed1i nay.",
        "spam": true
    },
    {
        "id": 26,
        "address": "9903551454",
        "sms": "Tin nh\u1eafn s\u1ed1 26: H\u00f4m nay l\u00e0 ng\u00e0y l\u1ec5 quan tr\u1ecdng. Ch\u00fac m\u1eebng v\u00e0 tr\u00e0n \u0111\u1ea7y ni\u1ec1m vui.",
        "spam": false
    },
    {
        "id": 27,
        "address": "6405608156",
        "sms": "Tin nh\u1eafn s\u1ed1 27: B\u1ea1n \u0111\u00e3 \u0111\u0103ng k\u00fd th\u00e0nh c\u00f4ng. H\u00e3y ki\u1ec3m tra email \u0111\u1ec3 ho\u00e0n th\u00e0nh quy tr\u00ecnh.",
        "spam": false
    },
    {
        "id": 28,
        "address": "8659071515",
        "sms": "Tin nh\u1eafn s\u1ed1 28: Xin ch\u00fac m\u1eebng! B\u1ea1n \u0111\u00e3 tr\u00fang gi\u1ea3i \u0111\u1eb7c bi\u1ec7t.",
        "spam": true
    },
    {
        "id": 29,
        "address": "2951004489",
        "sms": "Tin nh\u1eafn s\u1ed1 29: Xin ch\u00fac m\u1eebng! B\u1ea1n \u0111\u00e3 tr\u00fang gi\u1ea3i \u0111\u1eb7c bi\u1ec7t.",
        "spam": true
    },
    {
        "id": 30,
        "address": "1566678159",
        "sms": "Tin nh\u1eafn s\u1ed1 30: \u0110\u1eb7t h\u00e0ng ngay h\u00f4m nay \u0111\u1ec3 nh\u1eadn \u01b0u \u0111\u00e3i \u0111\u1eb7c bi\u1ec7t.",
        "spam": false
    },
    {
        "id": 31,
        "address": "6827077561",
        "sms": "Tin nh\u1eafn s\u1ed1 31: Ch\u00fac m\u1eebng sinh nh\u1eadt!",
        "spam": false
    },
    {
        "id": 32,
        "address": "9150199973",
        "sms": "Tin nh\u1eafn s\u1ed1 32: Xin ch\u00fac m\u1eebng! B\u1ea1n \u0111\u00e3 tr\u00fang gi\u1ea3i \u0111\u1eb7c bi\u1ec7t.",
        "spam": false
    },
    {
        "id": 33,
        "address": "1896314703",
        "sms": "Tin nh\u1eafn s\u1ed1 33: \u0110\u01a1n h\u00e0ng c\u1ee7a b\u1ea1n \u0111\u00e3 \u0111\u01b0\u1ee3c giao th\u00e0nh c\u00f4ng.",
        "spam": true
    },
    {
        "id": 34,
        "address": "9960748637",
        "sms": "Tin nh\u1eafn s\u1ed1 34: Ch\u00fac m\u1eebng sinh nh\u1eadt!",
        "spam": true
    }
    ];

List getSMSList(address) {
  var smsList = [];
  for ( var sms in SMSSample) 
  {
    if (sms.containsValue(address))
    {
      smsList.add(sms);
    }
  }
  return smsList;
}

List getSpamSMSList() {
  var smsList = [];
  for ( var sms in SMSSample) 
  {
    if (sms.containsValue(true))
    {
      smsList.add(sms);
    }
  }
  return smsList;
}


Map getConversationList() {
  
  var conversationList = {};
  for (var sms in SMSSample) {
    if (conversationList.containsKey(sms['address'])) {
      conversationList[sms['address']] = sms;
    }
    else {
      conversationList[sms['address']] = sms;
    }
  }
  return conversationList;
}


Map getFilterConversationList(filter) {
  var conversationList = getConversationList();
  var queue  = [];
  for (var conversation in conversationList.keys) {
    var spam = false;
    var smsList = getSMSList(conversation);
    for (var sms in smsList) {
      if (sms['spam'] == true) {
        spam = true;
      } 
    }
    if (spam) {
      queue.add(conversation);
    }
  }
  if (filter == "nospam") {
    for (var item in queue) {
    conversationList.remove(item);
  }
  return conversationList;
  }
  else {
    var spamList = {};
    for (var item in queue) {
      spamList[item] = conversationList[item];
    }
    return spamList;
  }
  

}
void main() {
  var smsList = getConversationList();
  print(smsList);
}

